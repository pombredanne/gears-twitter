<!DOCTYPE html>
<html class="fuelux">
<head>
	<title></title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
	<script src="//internalcdn.xexacttargetapps.com/fuelux-gearapi/0.0/gear.min.js"></script>
	<script src="//fuelcdn.com/fuelux-imh/2.2/loader.min.js"></script>
	<link href="//fuelcdn.com/fuelux-imh/2.2/css/fuelux.css" rel="stylesheet" />
	<style type="text/css">
		body {
			background-color: #f3f3f3 !important;
		}
	</style>
	<script>
		$(document).ready(function() {
			FUELUX_EDITOR.trigger('resize', { height: 150, width:300 });
			FUELUX_EDITOR.trigger('fetch');

			// load gear, fires on response to the 'fetch' event
			FUELUX_EDITOR.on('receive', function(e, details) {
				console.log(JSON.stringify(details));

				$('#firstName').val(details.gearData.firstName);
				$('#lastName').val(details.gearData.lastName);
				$('#chkGreeting').attr('checked', details.gearData.showGreeting === true);

				FUELUX_EDITOR.trigger('ready');
			});

			// close and populate editor with gear data
			FUELUX_EDITOR.on('accept', function(e, details) {
				var firstName = $('#firstName').val();
				var lastName = $('#lastName').val();
				var showGreeting = $('#chkGreeting').is(':checked');

				var content = ((showGreeting) ? 'Hello ' : '') + firstName + ' ' + lastName;

				FUELUX_EDITOR.trigger('done', {
					content: content,
					design: 'bar',
					gearData: { firstName:firstName, lastName:lastName, showGreeting:showGreeting }
				});
			});
		});
	</script>
</head>
<body>
	First Name: <input type="text" id="firstName" /><br/>
	Last Name: <input type="text" id="lastName" /><br/>
	<label class="checkbox checkbox-custom"><input type="checkbox" id="chkGreeting" checked="checked"><i class="checkbox checked"></i>Show Greeting</label>
</body>
</html>